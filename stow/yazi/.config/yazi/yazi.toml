[flavor]
dark = "catppuccin-mocha"

[mgr]
ratio = [1, 4, 3]
linemode = "mtime"
show_hidden = true
sort_by = "natural"
sort_dir_first = true
title_format = "{cwd}"

[preview]
wrap = "no"
tab_size = 2
max_width = 1920
max_height = 1080
image_filter = "triangle"
image_quality = 70
image_delay = 60

[opener]
edit = [
  { run = '$EDITOR "$@"', block = true, for = "unix" }
]
open = [
  { run = 'xdg-open "$@"', desc = "Open", orphan = true, for = "unix" }
]
pdf = [
  { run = 'zathura "$@"', desc = "PDF (zathura)", block = true, for = "unix" }
]
play = [
  { run = 'mpv "$@"', desc = "Media (mpv)", orphan = true, for = "unix" }
]
img = [
  { run = 'feh "$@"', desc = "Image (feh)", orphan = true, for = "unix" }
]
term = [
  { run = 'kitty +kitten icat "$@"', desc = "Kitty icat", orphan = true, for = "linux" }
]
tmux_here = [
  { run = 'tmux respawn-pane -k "nvim \"$@\""', desc = "nvim en pane actual", for = "unix" }
]
tmux_win = [
  { run = 'tmux new-window -c "$PWD" "nvim \"$@\""', desc = "nvim en nueva ventana", orphan = true, for = "unix" },
]

tmux_vsplit = [
  { run = 'tmux split-window -v -c "$P"D" "nvim \"$@\""', orphan = true, desc = "nvim vsplit", for = "unix" }
]

tmux_hsplit = [
  { run = 'tmux split-window -h -c "$P"D" "nvim \"$@\""', orphan = true, desc = "nvim vsplit", for = "unix" }
]

extract = [
  { run = '''sh -lc 'for f in "$@"; do 7z x -aoa -o"$PWD" -- "$f"; done' ''', desc = "Extraer aqu√≠ (7z)", for = "unix" }
]
inspect = [
  { run = '''sh -lc 'exiftool "$1"; echo; read -p "Enter para sair..." _' ''', block = true, desc = "Mostrar EXIF", for = "unix" }
]

[open]
prepend_rules = [
  { mime = "text/*",           use = "edit" },
  { mime = "application/json", use = "edit" },
  { mime = "application/pdf",  use = [ "pdf", "open" ] },
  { mime = "image/*",          use = [ "img", "open", "term" ] },
  { mime = "video/*",          use = "play" },
  { mime = "audio/*",          use = "play" },
  { name = "*.md",             use = "edit" },
  { mime = "application/zip",  use = [ "extract", "inspect" ] },
  { mime = "application/gzip", use = [ "extract", "inspect" ] },
  { mime = "application/x-tar",use = [ "extract", "inspect" ] },
  { mime = "application/xz",   use = [ "extract", "inspect" ] },
]
append_rules = [
  { name = "*", use = "open" }
]

[plugin]
prepend_previewers = [
  { name = "*.md",       run = 'piper -- sh -lc "mdcat \"$1\""' },
  { name = "*.markdown", run = 'piper -- sh -lc "mdcat \"$1\""' },
  { name = "README*",    run = 'piper -- sh -lc "mdcat \"$1\""' }
]

